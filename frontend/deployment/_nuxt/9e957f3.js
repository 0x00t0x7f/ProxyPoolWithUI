(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1191:function(e,t,n){"use strict";n.r(t);n(133),n(79),n(80);var r=n(20),c=n(3),o=n.n(c),l=[{title:"名称",dataIndex:"name"},{title:"当前可用代理数量",dataIndex:"validated_cnt"},{title:"总共爬取代理数量",dataIndex:"sum_proxies_cnt"},{title:"上次爬取代理数量",dataIndex:"last_proxies_cnt"},{title:"上次爬取时间",dataIndex:"last_fetch_date",customRender:function(e){return e?o()(e).format("YYYY-MM-DD HH:mm:ss"):""}},{dataIndex:"enable",slots:{title:"enableTitle"},scopedSlots:{customRender:"enable"}}],d={data:function(){return{fetchers:[],columns:l,autoupdate:!0,lastupdate:"",handle:null}},mounted:function(){var e=this;this.handle=setInterval((function(){e.autoupdate&&e.update()}),2e3),this.update()},destroyed:function(){this.handle&&clearInterval(this.handle),this.handle=null},methods:{update:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/fetchers_status");case 2:data=t.sent,e.fetchers=data.fetchers,e.lastupdate=o()().format("HH:mm:ss");case 5:case"end":return t.stop()}}),t)})))()},clearStatus:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/clear_fetchers_status");case 2:e.$message.success("清空成功");case 3:case"end":return t.stop()}}),t)})))()},enableChange:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.enable){n.next=5;break}return n.next=3,t.$http.get("/fetcher_enable",{name:e.name,enable:"0"});case 3:n.next=7;break;case 5:return n.next=7,t.$http.get("/fetcher_enable",{name:e.name,enable:"1"});case 7:return t.$message.success("修改成功"),n.next=10,t.update();case 10:case"end":return n.stop()}}),n)})))()}}},f=n(100),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-row",{attrs:{gutter:16}},[n("a-col",{attrs:{span:4}},[n("a-card",{attrs:{"body-style":{padding:"20px 24px 4px"}}},[n("p",[e._v("\n                    自动刷新:\n                    "),n("a-switch",{model:{value:e.autoupdate,callback:function(t){e.autoupdate=t},expression:"autoupdate"}})],1),e._v(" "),n("p",[e._v("刷新时间："+e._s(e.lastupdate))])])],1),e._v(" "),n("a-col",{attrs:{span:4}},[n("a-card",{attrs:{"body-style":{padding:"20px 24px 43px"}}},[n("div",{staticStyle:{"text-align":"center"}},[n("a-button",{attrs:{type:"primary"},on:{click:e.clearStatus}},[e._v("\n                        清空统计信息\n                    ")]),e._v(" "),n("a-tooltip",{attrs:{title:"清空`总共爬取代理数量`等，已经爬取到的代理不会删除"}},[n("a-icon",{attrs:{type:"question-circle"}})],1)],1)])],1)],1),e._v(" "),n("br"),e._v(" "),n("a-table",{attrs:{columns:e.columns,"data-source":e.fetchers,"row-key":"name",pagination:!1,bordered:!0},scopedSlots:e._u([{key:"enable",fn:function(t,r){return[n("a-switch",{attrs:{"default-checked":t},on:{change:function(t){return e.enableChange(r)}}})]}}])},[n("span",{attrs:{slot:"enableTitle"},slot:"enableTitle"},[e._v("\n            是否启用\n            "),n("a-tooltip",{scopedSlots:e._u([{key:"title",fn:function(){return[n("span",[e._v("\n                        在禁用之后，将不会再运行该爬取器。\n                    ")])]},proxy:!0}])},[e._v(" "),n("a-icon",{attrs:{type:"question-circle"}})],1)],1)])],1)}),[],!1,null,null,null);t.default=component.exports}}]);